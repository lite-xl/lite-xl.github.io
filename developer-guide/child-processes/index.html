<!doctype html><html lang=en class=no-js><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Learn how to use the Process API to start and manage child processes in Lite XL."><meta name=author content="takase1121 <20792268+takase1121@users.noreply.github.com>"><link rel=canonical href=https://takase1121.github.io/lite-xl-docs/developer-guide/child-processes/><link rel=prev href=../interacting-with-the-os/><link rel=next href=../../about/contributors/><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.44"><title>Child Processes - Lite XL</title>
<link rel=stylesheet href=../../assets/stylesheets/main.0253249f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../stylesheets/extra.a58208.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,t)=>(e<<5)-e+t.charCodeAt(0),0),__md_get=(e,t=localStorage,n=__md_scope)=>JSON.parse(t.getItem(n.pathname+"."+e)),__md_set=(e,t,n=localStorage,s=__md_scope)=>{try{n.setItem(s.pathname+"."+e,JSON.stringify(t))}catch{}}</script><meta property="og:type" content="website"><meta property="og:title" content="Child Processes - Lite XL"><meta property="og:description" content="Learn how to use the Process API to start and manage child processes in Lite XL."><meta property="og:image" content="https://takase1121.github.io/lite-xl-docs/assets/images/social/developer-guide/child-processes.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:url" content="https://takase1121.github.io/lite-xl-docs/developer-guide/child-processes/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Child Processes - Lite XL"><meta name=twitter:description content="Learn how to use the Process API to start and manage child processes in Lite XL."><meta name=twitter:image content="https://takase1121.github.io/lite-xl-docs/assets/images/social/developer-guide/child-processes.png"><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>html.glightbox-open{overflow:initial;height:100%}.gslide-title{margin-top:0;user-select:text}.gslide-desc{color:#666;user-select:text}.gslide-image img{background:#fff}.gscrollbar-fixer{padding-right:15px}.gdesc-inner{font-size:.75rem}body[data-md-color-scheme=slate] .gdesc-inner{background:var(--md-default-bg-color)}body[data-md-color-scheme=slate] .gslide-title{color:var(--md-default-fg-color)}body[data-md-color-scheme=slate] .gslide-desc{color:var(--md-default-fg-color)}</style><script src=../../assets/javascripts/glightbox.min.js></script><body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo><input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off>
<input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off>
<label class=md-overlay for=__drawer></label><div data-md-component=skip><a href=#example-reading-a-file-with-cat class=md-skip>Skip to content</a></div><div data-md-component=announce></div><div data-md-color-scheme=default data-md-component=outdated hidden></div><header class=md-header data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a href=../.. title="Lite XL" class="md-header__button md-logo" aria-label="Lite XL" data-md-component=logo><img src=../../assets/icon.svg alt=logo>
</a><label class="md-header__button md-icon" for=__drawer><svg viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis>Lite XL</span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis>Child Processes</span></div></div></div><form class=md-header__option data-md-component=palette><input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0>
<label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden><svg viewBox="0 0 24 24"><path d="M12 8a4 4 0 00-4 4 4 4 0 004 4 4 4 0 004-4 4 4 0 00-4-4m0 10a6 6 0 01-6-6 6 6 0 016-6 6 6 0 016 6 6 6 0 01-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
</label><input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1>
<label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden><svg viewBox="0 0 24 24"><path d="M12 18c-.89.0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 016 6 6 6 0 01-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label></form><script>if(palette=__md_get("__palette"),palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var palette,key,value,media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><label class="md-header__button md-icon" for=__search><svg viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52.0 019.5 16 6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required>
<label class="md-search__icon md-icon" for=__search><svg viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5.0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52.0 019.5 16 6.5 6.5.0 013 9.5 6.5 6.5.0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg><svg viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav class=md-search__options aria-label=Search><button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1><svg viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav></form><div class=md-search__output><div class=md-search__scrollwrap tabindex=0 data-md-scrollfix><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta>Initializing search</div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a href=https://github.com/takase1121/lite-xl-docs/ title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87.0 00-40.81.0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34.0 01-48.55.0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86.0 000 40.81l195.61 195.6a28.86 28.86.0 0040.8.0l194.69-194.69a28.86 28.86.0 000-40.81"/></svg></div><div class=md-source__repository>GitHub</div></a></div></nav></header><div class=md-container data-md-component=container><nav class=md-tabs aria-label=Tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a href=../.. class=md-tabs__link>Home</a><li class=md-tabs__item><a href=../../setup/getting-started/ class=md-tabs__link>Set Up</a><li class=md-tabs__item><a href=../../user-guide/introduction/ class=md-tabs__link>User Guide</a><li class="md-tabs__item md-tabs__item--active"><a href=../introduction/ class=md-tabs__link>Developer Guide</a><li class=md-tabs__item><a href=../../about/contributors/ class=md-tabs__link>About</a></ul></div></nav><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a href=../.. title="Lite XL" class="md-nav__button md-logo" aria-label="Lite XL" data-md-component=logo><img src=../../assets/icon.svg alt=logo>
</a>Lite XL</label><div class=md-nav__source><a href=https://github.com/takase1121/lite-xl-docs/ title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87.0 00-40.81.0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34.0 01-48.55.0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86.0 000 40.81l195.61 195.6a28.86 28.86.0 0040.8.0l194.69-194.69a28.86 28.86.0 000-40.81"/></svg></div><div class=md-source__repository>GitHub</div></a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../.. class=md-nav__link><span class=md-ellipsis>Home</span></a><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_2>
<label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0><span class=md-ellipsis>Set Up
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false><label class=md-nav__title for=__nav_2><span class="md-nav__icon md-icon"></span>
Set Up</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../setup/getting-started/ class=md-nav__link><span class=md-ellipsis>Getting Started</span></a><li class=md-nav__item><a href=../../setup/install-from-package-managers/ class=md-nav__link><span class=md-ellipsis>Install from Package Managers</span></a><li class=md-nav__item><a href=../../setup/building-from-source/ class=md-nav__link><span class=md-ellipsis>Building from Source</span></a><li class=md-nav__item><a href=../../setup/platform-notes/ class=md-nav__link><span class=md-ellipsis>Platform-Specific Notes</span></a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_3>
<label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0><span class=md-ellipsis>User Guide
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false><label class=md-nav__title for=__nav_3><span class="md-nav__icon md-icon"></span>
User Guide</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../user-guide/introduction/ class=md-nav__link><span class=md-ellipsis>Introduction</span></a><li class=md-nav__item><a href=../../user-guide/configuration/ class=md-nav__link><span class=md-ellipsis>Configuration</span></a><li class=md-nav__item><a href=../../user-guide/managing-plugins/ class=md-nav__link><span class=md-ellipsis>Managing Plugins</span></a><li class=md-nav__item><a href=../../user-guide/ide-setup/ class=md-nav__link><span class=md-ellipsis>IDE Setup</span></a><li class=md-nav__item><a href=../../user-guide/lsp/ class=md-nav__link><span class=md-ellipsis>Language Server support</span></a><li class=md-nav__item><a href=../../user-guide/keymap/ class=md-nav__link><span class=md-ellipsis>Keymap</span></a><li class=md-nav__item><a href=../../user-guide/macos-keymap/ class=md-nav__link><span class=md-ellipsis>macOS Keymap</span></a></ul></nav><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_4 checked>
<label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex><span class=md-ellipsis>Developer Guide
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true><label class=md-nav__title for=__nav_4><span class="md-nav__icon md-icon"></span>
Developer Guide</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../introduction/ class=md-nav__link><span class=md-ellipsis>Introduction</span></a><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_4_2>
<label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0><span class=md-ellipsis>Syntaxes and Themes
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false><label class=md-nav__title for=__nav_4_2><span class="md-nav__icon md-icon"></span>
Syntaxes and Themes</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../creating-syntaxes/ class=md-nav__link><span class=md-ellipsis>Creating Syntaxes</span></a><li class=md-nav__item><a href=../creating-themes/ class=md-nav__link><span class=md-ellipsis>Creating Themes</span></a></ul></nav><li class=md-nav__item><a href=../simple-plugin/ class=md-nav__link><span class=md-ellipsis>Simple Plugin</span></a><li class=md-nav__item><a href=../commands/ class=md-nav__link><span class=md-ellipsis>Commands</span></a><li class=md-nav__item><a href=../managing-keyboard-shortcuts/ class=md-nav__link><span class=md-ellipsis>Managing Keyboard Shortcuts</span></a><li class=md-nav__item><a href=../classes-and-objects/ class=md-nav__link><span class=md-ellipsis>Classes and Objects</span></a><li class=md-nav__item><a href=../documents/ class=md-nav__link><span class=md-ellipsis>Documents</span></a><li class=md-nav__item><a href=../views/ class=md-nav__link><span class=md-ellipsis>Views</span></a><li class=md-nav__item><a href=../background-tasks/ class=md-nav__link><span class=md-ellipsis>Background Tasks</span></a><li class=md-nav__item><a href=../debugging/ class=md-nav__link><span class=md-ellipsis>Debugging</span></a><li class=md-nav__item><a href=../using-regular-expressions/ class=md-nav__link><span class=md-ellipsis>Using Regular Expressions</span></a><li class=md-nav__item><a href=../interacting-with-the-os/ class=md-nav__link><span class=md-ellipsis>Interacting with the OS</span></a><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" type=checkbox id=__toc>
<label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis>Child Processes
</span><span class="md-nav__icon md-icon"></span>
</label><a href=./ class="md-nav__link md-nav__link--active"><span class=md-ellipsis>Child Processes</span></a><nav class="md-nav md-nav--secondary" aria-label="Table of contents"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span>
Table of contents</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#example-reading-a-file-with-cat class=md-nav__link><span class=md-ellipsis>Example: reading a file with cat</span></a><li class=md-nav__item><a href=#terms class=md-nav__link><span class=md-ellipsis>Terms</span></a><li class=md-nav__item><a href=#using-the-process-api class=md-nav__link><span class=md-ellipsis>Using the Process API</span></a><nav class=md-nav aria-label="Using the Process API"><ul class=md-nav__list><li class=md-nav__item><a href=#reading-from-a-child-process class=md-nav__link><span class=md-ellipsis>Reading from a child process</span></a><li class=md-nav__item><a href=#waiting-for-a-child-process class=md-nav__link><span class=md-ellipsis>Waiting for a child process</span></a><li class=md-nav__item><a href=#terminating-a-child-process class=md-nav__link><span class=md-ellipsis>Terminating a child process</span></a><li class=md-nav__item><a href=#miscellaneous class=md-nav__link><span class=md-ellipsis>Miscellaneous</span></a><li class=md-nav__item><a href=#error-handling class=md-nav__link><span class=md-ellipsis>Error handling</span></a></ul></nav></ul></nav></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" type=checkbox id=__nav_5>
<label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0><span class=md-ellipsis>About
</span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false><label class=md-nav__title for=__nav_5><span class="md-nav__icon md-icon"></span>
About</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../about/contributors/ class=md-nav__link><span class=md-ellipsis>Contributors</span></a><li class=md-nav__item><a href=../../about/faq/ class=md-nav__link><span class=md-ellipsis>FAQ</span></a></ul></nav></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--secondary" aria-label="Table of contents"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span>
Table of contents</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#example-reading-a-file-with-cat class=md-nav__link><span class=md-ellipsis>Example: reading a file with cat</span></a><li class=md-nav__item><a href=#terms class=md-nav__link><span class=md-ellipsis>Terms</span></a><li class=md-nav__item><a href=#using-the-process-api class=md-nav__link><span class=md-ellipsis>Using the Process API</span></a><nav class=md-nav aria-label="Using the Process API"><ul class=md-nav__list><li class=md-nav__item><a href=#reading-from-a-child-process class=md-nav__link><span class=md-ellipsis>Reading from a child process</span></a><li class=md-nav__item><a href=#waiting-for-a-child-process class=md-nav__link><span class=md-ellipsis>Waiting for a child process</span></a><li class=md-nav__item><a href=#terminating-a-child-process class=md-nav__link><span class=md-ellipsis>Terminating a child process</span></a><li class=md-nav__item><a href=#miscellaneous class=md-nav__link><span class=md-ellipsis>Miscellaneous</span></a><li class=md-nav__item><a href=#error-handling class=md-nav__link><span class=md-ellipsis>Error handling</span></a></ul></nav></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><a href=https://github.com/takase1121/lite-xl-docs/edit/master/docs/developer-guide/child-processes.md title="Edit this page" class="md-content__button md-icon"><svg viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1.0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1.0.3.1.4.2l1.3 1.3c.2.2.2.6.0.8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
</a><a href=https://github.com/takase1121/lite-xl-docs/raw/master/docs/developer-guide/child-processes.md title="View source of this page" class="md-content__button md-icon"><svg viewBox="0 0 24 24"><path d="M17 18c.56.0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73.0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5A2.5 2.5.0 0114.5 19a2.5 2.5.0 012.5-2.5 2.5 2.5.0 012.5 2.5A2.5 2.5.0 0117 21.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6A2 2 0 004 4v16a2 2 0 002 2h4.5a8.2 8.2.0 01-1.23-2"/></svg></a><h1>Child Processes</h1><p>Lite XL provides a process API to launch external applications.
This API is meant to replace Lua's <code>io.popen</code>, <code>system.exec()</code> and lite's <a href=https://github.com/rxi/console/blob/fb3d414d085d4110364314d6cd8380dc1d386249/init.lua#L100>pipe-to-a-file</a> approach.<p>Advantages of this API includes:<ul><li>Proper argument escaping (arguments are supplied via a table)<li>Non-blocking IO<li>Able to detach processes from Lite XL<li>Does not create temporary files<li>Mostly cross-platform (does not require special code for each shell)<li>Does not create a console window on Windows</ul><p>Unless you plan to run a command and forget about it, you should stick
with the Process API as it provides more features.<h2 id=example-reading-a-file-with-cat>Example: reading a file with <code>cat</code></h2><p>This example uses <code>cat</code> to read a file. This approach is impractical, but it demonstrates the typical usage
of the Process API.<div class=highlight><pre><span></span><code><a id=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kd>local</span> <span class=n>core</span> <span class=o>=</span> <span class=nb>require</span> <span class=s2>&quot;core&quot;</span>
<a id=__codelineno-0-2 href=#__codelineno-0-2></a>
<a id=__codelineno-0-3 href=#__codelineno-0-3></a><span class=kd>local</span> <span class=n>filename</span> <span class=o>=</span> <span class=s2>&quot;myfile.lua&quot;</span>
<a id=__codelineno-0-4 href=#__codelineno-0-4></a><span class=kd>local</span> <span class=n>proc</span> <span class=o>=</span> <span class=n>process</span><span class=p>.</span><span class=n>start</span> <span class=p>{</span> <span class=s2>&quot;cat&quot;</span><span class=p>,</span> <span class=n>filename</span> <span class=p>}</span>
<a id=__codelineno-0-5 href=#__codelineno-0-5></a>
<a id=__codelineno-0-6 href=#__codelineno-0-6></a><span class=c1>-- we use core.add_thread so that we don&#39;t softlock the editor</span>
<a id=__codelineno-0-7 href=#__codelineno-0-7></a><span class=c1>-- while reading the output of the child process.</span>
<a id=__codelineno-0-8 href=#__codelineno-0-8></a><span class=n>core</span><span class=p>.</span><span class=n>add_thread</span><span class=p>(</span><span class=kr>function</span><span class=p>()</span>
<a id=__codelineno-0-9 href=#__codelineno-0-9></a>  <span class=kd>local</span> <span class=n>readbuf</span> <span class=o>=</span> <span class=p>{}</span>
<a id=__codelineno-0-10 href=#__codelineno-0-10></a>  <span class=kr>while</span> <span class=kc>true</span> <span class=kr>do</span>
<a id=__codelineno-0-11 href=#__codelineno-0-11></a>    <span class=c1>-- yield so that the rest of the editor can carry out its tasks</span>
<a id=__codelineno-0-12 href=#__codelineno-0-12></a>    <span class=c1>-- eg. accepting input, updating the UI</span>
<a id=__codelineno-0-13 href=#__codelineno-0-13></a>    <span class=nb>coroutine.yield</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-0-14 href=#__codelineno-0-14></a>
<a id=__codelineno-0-15 href=#__codelineno-0-15></a>    <span class=c1>-- try to read from the standard output of the process.</span>
<a id=__codelineno-0-16 href=#__codelineno-0-16></a>    <span class=kd>local</span> <span class=n>read</span> <span class=o>=</span> <span class=n>proc</span><span class=p>:</span><span class=n>read_stdout</span><span class=p>()</span>
<a id=__codelineno-0-17 href=#__codelineno-0-17></a>    <span class=c1>-- read == nil is a pretty good indication that the pipe is closed</span>
<a id=__codelineno-0-18 href=#__codelineno-0-18></a>    <span class=c1>-- therefore, no more data can be read.</span>
<a id=__codelineno-0-19 href=#__codelineno-0-19></a>    <span class=kr>if</span> <span class=n>read</span> <span class=o>==</span> <span class=kc>nil</span> <span class=kr>then</span> <span class=kr>break</span> <span class=kr>end</span>
<a id=__codelineno-0-20 href=#__codelineno-0-20></a>    <span class=kr>if</span> <span class=n>read</span> <span class=o>~=</span> <span class=s2>&quot;&quot;</span> <span class=kr>then</span>
<a id=__codelineno-0-21 href=#__codelineno-0-21></a>      <span class=c1>-- if we read something, append it into the table</span>
<a id=__codelineno-0-22 href=#__codelineno-0-22></a>      <span class=n>readbuf</span><span class=p>[</span><span class=o>#</span><span class=n>readbuf</span><span class=o>+</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>read</span>
<a id=__codelineno-0-23 href=#__codelineno-0-23></a>    <span class=kr>end</span>
<a id=__codelineno-0-24 href=#__codelineno-0-24></a>    <span class=c1>-- efficiently concatenate all the output into a string</span>
<a id=__codelineno-0-25 href=#__codelineno-0-25></a>    <span class=kd>local</span> <span class=n>process_output</span> <span class=o>=</span> <span class=nb>table.concat</span><span class=p>(</span><span class=n>readbuf</span><span class=p>)</span>
<a id=__codelineno-0-26 href=#__codelineno-0-26></a>    <span class=c1>-- note: never use core.log(process_output)!</span>
<a id=__codelineno-0-27 href=#__codelineno-0-27></a>    <span class=c1>-- core.log() accepts the same parameters as string.format(),</span>
<a id=__codelineno-0-28 href=#__codelineno-0-28></a>    <span class=c1>-- so you risk injecting invalid format strings!</span>
<a id=__codelineno-0-29 href=#__codelineno-0-29></a>    <span class=n>core</span><span class=p>.</span><span class=n>log</span><span class=p>(</span><span class=s2>&quot;read: %s&quot;</span><span class=p>,</span> <span class=n>process_output</span><span class=p>)</span>
<a id=__codelineno-0-30 href=#__codelineno-0-30></a><span class=kr>end</span><span class=p>)</span>
</code></pre></div><h2 id=terms>Terms</h2><p>To prevent confusion, these terms are used to describe various things:<table><thead><tr><th>Terms<th>Meaning<tbody><tr><td>Child process<td>A process created with Process API via <code>process.start()</code><tr><td>Parent process<td>The parent process that owns the child. This usually refers to Lite XL.<tr><td>Process<td>Any process (including child and parent processes).<tr><td>Stream<td>An entity used to transfer data between child and parent processes. Think of it as a queue that can only be enqueued and dequeued.<tr><td>Standard input<td>The standard input of most processes, also known as stdin.<tr><td>Standard error<td>The standard error of most processes, also known as stderr.<tr><td>Standard output<td>The standard output of most processes, also known as stdout.</table><h2 id=using-the-process-api>Using the Process API</h2><p>To create a child process, use <code>process.start()</code>.<div class=highlight><pre><span></span><code><a id=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kd>local</span> <span class=nb>type</span> <span class=n>RedirectType</span> <span class=o>=</span> <span class=n>number</span>
<a id=__codelineno-1-2 href=#__codelineno-1-2></a>
<a id=__codelineno-1-3 href=#__codelineno-1-3></a><span class=kd>local</span> <span class=n>record</span> <span class=n>ProcessOptions</span>
<a id=__codelineno-1-4 href=#__codelineno-1-4></a>  <span class=n>timeout</span><span class=p>:</span> <span class=n>number</span><span class=p>,</span>
<a id=__codelineno-1-5 href=#__codelineno-1-5></a>  <span class=n>cwd</span><span class=p>:</span> <span class=n>string</span><span class=p>,</span>
<a id=__codelineno-1-6 href=#__codelineno-1-6></a>  <span class=n>stdin</span><span class=p>:</span> <span class=n>RedirectType</span><span class=p>,</span>
<a id=__codelineno-1-7 href=#__codelineno-1-7></a>  <span class=n>stdout</span><span class=p>:</span> <span class=n>RedirectType</span><span class=p>,</span>
<a id=__codelineno-1-8 href=#__codelineno-1-8></a>  <span class=n>stderr</span><span class=p>:</span> <span class=n>RedirectType</span><span class=p>,</span>
<a id=__codelineno-1-9 href=#__codelineno-1-9></a>  <span class=n>env</span><span class=p>:</span> <span class=p>{</span><span class=n>string</span><span class=p>:</span> <span class=n>string</span><span class=p>}</span>
<a id=__codelineno-1-10 href=#__codelineno-1-10></a><span class=kr>end</span>
<a id=__codelineno-1-11 href=#__codelineno-1-11></a>
<a id=__codelineno-1-12 href=#__codelineno-1-12></a><span class=kr>function</span> <span class=nc>process</span><span class=p>.</span><span class=nf>start</span><span class=p>(</span><span class=n>program_args</span><span class=p>:</span> <span class=p>{</span><span class=n>string</span><span class=p>}</span> <span class=o>|</span> <span class=n>string</span><span class=p>,</span>
<a id=__codelineno-1-13 href=#__codelineno-1-13></a>                        <span class=n>options</span><span class=p>:</span> <span class=n>ProcessOptions</span><span class=p>):</span> <span class=n>Process</span>
<a id=__codelineno-1-14 href=#__codelineno-1-14></a><span class=kr>end</span>
</code></pre></div><p>The first argument of the function is a table containing the program name and its arguments.
The program name and its arguments need not be escaped as the API does it when necessary.<p>Since v2.1.0, users can provide a string instead of a table as the first argument to prevent the function
from escaping them.
This may help with legacy software on Windows such as <code>cmd.exe</code>.
However, this should not be done on POSIX platforms as the entire string will be treated as the program name
and cause issues.<div class="admonition note"><p class=admonition-title>Note<p>Before v2.1.0, this table is not escaped on Windows.</div><p>The second argument specifies options to control process creation.<p><code>timeout</code> is an advisory value that will be used by <code>process:wait()</code> and is optional.<p><code>cwd</code> is the current working directory of the program.
If specified, the child process would run as if it was started in the directory.<p><code>stdin</code>, <code>stdout</code> and <code>stderr</code> tells Lite XL how to treat standard input and output of the child process.
There are four possible values:<ul><li><code>process.REDIRECT_DEFAULT</code> is the default behavior. It will be deprecated
in future versions as specifying <code>nil</code> is preferred.<li><code>process.REDIRECT_PIPE</code> allows the Process API to write/read the input/output of the child process.<li><code>process.REDIRECT_PARENT</code> redirects the child process' input/output to the parent.
If <code>stdin</code> has this value, child process will accept input from the parent process' console.
If <code>stdout</code> or <code>stderr</code> has this value, child process will output to the parent process' console.<li><code>process.REDIRECT_DISCARD</code> discards any data to/from child process.<li><code>process.REDIRECT_STDOUT</code> can only be used on <code>stderr</code> and will redirect the child process' standard error
to its standard output.</ul><p><code>env</code> is a table containing the environment variables for the child process as key-value pairs.<div class="admonition note"><p class=admonition-title>Note<p>On POSIX platforms, this table will <strong>extend</strong> the parent's environment.
On Windows with Lite XL version v2.1.1 and below, this table will <strong>replace</strong> the parent's environment.</div><p>The function returns a <code>Process</code> object that the user should hold onto until
the child process can be safely terminated.
If the <code>Process</code> object is garbage-collected, the child process will be killed.<p><strong>Examples:</strong><div class=highlight><pre><span></span><code><a id=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1>-- run something in the background</span>
<a id=__codelineno-2-2 href=#__codelineno-2-2></a><span class=kd>local</span> <span class=n>proc</span> <span class=o>=</span> <span class=n>process</span><span class=p>.</span><span class=n>start</span> <span class=p>{</span> <span class=s2>&quot;bash&quot;</span><span class=p>,</span> <span class=s2>&quot;-c&quot;</span><span class=p>,</span> <span class=s2>&quot;echo hello world&quot;</span> <span class=p>}</span>
<a id=__codelineno-2-3 href=#__codelineno-2-3></a>
<a id=__codelineno-2-4 href=#__codelineno-2-4></a><span class=c1>-- start a process and read its output</span>
<a id=__codelineno-2-5 href=#__codelineno-2-5></a><span class=kd>local</span> <span class=n>proc</span> <span class=o>=</span> <span class=n>process</span><span class=p>.</span><span class=n>start</span><span class=p>({</span> <span class=s2>&quot;cat&quot;</span><span class=p>,</span> <span class=s2>&quot;myfile&quot;</span> <span class=p>},</span> <span class=p>{</span> <span class=n>stdout</span> <span class=o>=</span> <span class=n>process</span><span class=p>.</span><span class=n>REDIRECT_PIPE</span> <span class=p>})</span>
<a id=__codelineno-2-6 href=#__codelineno-2-6></a><span class=c1>-- might or might not print something as the child process</span>
<a id=__codelineno-2-7 href=#__codelineno-2-7></a><span class=c1>-- might not have written data to the standard output</span>
<a id=__codelineno-2-8 href=#__codelineno-2-8></a><span class=nb>print</span><span class=p>(</span><span class=n>proc</span><span class=p>:</span><span class=n>read_stdout</span><span class=p>())</span>
<a id=__codelineno-2-9 href=#__codelineno-2-9></a>
<a id=__codelineno-2-10 href=#__codelineno-2-10></a><span class=c1>-- start a script with verbose output (accepting options over env vars)</span>
<a id=__codelineno-2-11 href=#__codelineno-2-11></a><span class=kd>local</span> <span class=n>proc</span> <span class=o>=</span> <span class=n>process</span><span class=p>.</span><span class=n>start</span><span class=p>({</span> <span class=s2>&quot;./site.rb&quot;</span> <span class=p>},</span> <span class=p>{</span> <span class=n>env</span> <span class=o>=</span> <span class=p>{</span> <span class=n>VERBOSE</span> <span class=o>=</span> <span class=s2>&quot;1&quot;</span> <span class=p>}</span> <span class=p>})</span>
</code></pre></div><h3 id=reading-from-a-child-process>Reading from a child process</h3><p>If the child process is created with proper output modes, one can read the standard output/error
of the child process with the API.<p>To read from the child process' standard output, use <code>process:read_stdout(len)</code>.<p>To read from the child process' standard error, use <code>process:read_stderr(len)</code>.<div class=highlight><pre><span></span><code><a id=__codelineno-3-1 href=#__codelineno-3-1></a><span class=kr>function</span> <span class=nc>process</span><span class=p>:</span><span class=nf>read_stdout</span><span class=p>(</span><span class=n>len</span><span class=err>?</span><span class=p>:</span> <span class=n>number</span><span class=p>):</span> <span class=n>string</span><span class=p>,</span> <span class=n>string</span><span class=p>,</span> <span class=n>number</span> <span class=kr>end</span>
<a id=__codelineno-3-2 href=#__codelineno-3-2></a><span class=kr>function</span> <span class=nc>process</span><span class=p>:</span><span class=nf>read_stderr</span><span class=p>(</span><span class=n>len</span><span class=err>?</span><span class=p>:</span> <span class=n>number</span><span class=p>):</span> <span class=n>string</span><span class=p>,</span> <span class=n>string</span><span class=p>,</span> <span class=n>number</span> <span class=kr>end</span>
</code></pre></div><p>The <code>len</code> parameter is optional and is used to specify the maximum number of bytes to read from the stream.<p>These methods return a string with size up to <code>len</code> if data can be read.
Otherwise, they will return <code>nil</code>, an error message and the error code.<p><strong>Examples:</strong><div class=highlight><pre><span></span><code><a id=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1>-- proc is a process with stdout set to process.REDIRECT_PIPE</span>
<a id=__codelineno-4-2 href=#__codelineno-4-2></a><span class=c1>-- read default number of bytes (2048) from the process&#39; standard output</span>
<a id=__codelineno-4-3 href=#__codelineno-4-3></a><span class=nb>print</span><span class=p>(</span><span class=n>proc</span><span class=p>:</span><span class=n>read_stdout</span><span class=p>())</span>
<a id=__codelineno-4-4 href=#__codelineno-4-4></a>
<a id=__codelineno-4-5 href=#__codelineno-4-5></a><span class=c1>-- read default number of bytes (2048) from the process&#39; standard error</span>
<a id=__codelineno-4-6 href=#__codelineno-4-6></a><span class=c1>-- ensure that stderr of the process is not set to process.REDIRECT_STDOUT!</span>
<a id=__codelineno-4-7 href=#__codelineno-4-7></a><span class=nb>print</span><span class=p>(</span><span class=n>proc</span><span class=p>:</span><span class=n>read_stderr</span><span class=p>())</span>
</code></pre></div><h3 id=waiting-for-a-child-process>Waiting for a child process</h3><p>You might want to wait for a child process to end.<p>To check if a child process is still running, use <code>process:running()</code>.<p>To wait for a child process to end, use <code>process:wait(time)</code>.<div class=highlight><pre><span></span><code><a id=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kr>function</span> <span class=nc>process</span><span class=p>:</span><span class=nf>running</span><span class=p>():</span> <span class=n>boolean</span> <span class=kr>end</span>
<a id=__codelineno-5-2 href=#__codelineno-5-2></a><span class=kr>function</span> <span class=nc>process</span><span class=p>:</span><span class=nf>wait</span><span class=p>(</span><span class=n>timeout</span><span class=p>:</span> <span class=n>number</span><span class=p>):</span> <span class=n>number</span><span class=p>,</span> <span class=n>string</span><span class=p>,</span> <span class=n>number</span> <span class=kr>end</span>
</code></pre></div><p><code>process:running()</code> returns a boolean immediately indicating whether the process has ended.<div class="admonition note"><p class=admonition-title>Note<p>Do not use <code>process:running()</code> to determine when to stop reading the output of a child process.
A child process can end and leave residual data in the stream.
Instead, you should call <code>process.read_stdout()</code> or <code>process.read_stderr()</code>
until an appropriate error (<code>process.ERROR_PIPE</code>) occurs.</div><p><code>process:wait(time)</code> will wait for specified number of milliseconds before returning.
If the child process has ended, it will return the exit code of the process.
If the child process is still running or an error occurred,
it will return <code>nil</code> followed by an error message and error code.<p><code>time</code> is time in milliseconds before the method returns.
If it is 0, the method returns immediately without waiting for the child process to exit.
The parameter can also be <code>process.WAIT_DEADLINE</code> to use the timeout value provided in <code>process.start()</code>
or <code>process.WAIT_INFINITE</code> to wait until the child process exits (the default).<p><strong>Examples:</strong><div class=highlight><pre><span></span><code><a id=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1>-- wait for a process to end</span>
<a id=__codelineno-6-2 href=#__codelineno-6-2></a><span class=n>core</span><span class=p>.</span><span class=n>add_thread</span><span class=p>(</span><span class=kr>function</span><span class=p>()</span>
<a id=__codelineno-6-3 href=#__codelineno-6-3></a>  <span class=kr>while</span> <span class=n>process</span><span class=p>:</span><span class=n>running</span><span class=p>()</span> <span class=kr>do</span>
<a id=__codelineno-6-4 href=#__codelineno-6-4></a>    <span class=nb>coroutine.yield</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-6-5 href=#__codelineno-6-5></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;I am still running&quot;</span><span class=p>)</span>
<a id=__codelineno-6-6 href=#__codelineno-6-6></a>  <span class=kr>end</span>
<a id=__codelineno-6-7 href=#__codelineno-6-7></a>  <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Oh no!&quot;</span><span class=p>)</span>
<a id=__codelineno-6-8 href=#__codelineno-6-8></a><span class=kr>end</span><span class=p>)</span>
<a id=__codelineno-6-9 href=#__codelineno-6-9></a>
<a id=__codelineno-6-10 href=#__codelineno-6-10></a><span class=c1>-- wait for a process to end, and print its exit code.</span>
<a id=__codelineno-6-11 href=#__codelineno-6-11></a><span class=nb>print</span><span class=p>(</span><span class=s2>&quot;The process exited with the exit code &quot;</span> <span class=o>..</span> <span class=n>process</span><span class=p>:</span><span class=n>wait</span><span class=p>(</span><span class=n>process</span><span class=p>.</span><span class=n>WAIT_INFINITE</span><span class=p>))</span>
</code></pre></div><h3 id=terminating-a-child-process>Terminating a child process</h3><p>The Process API allows the user to terminate a child process gracefully or forcefully.<p>Use <code>process:terminate()</code> to terminate a child process gracefully.
If it fails, use <code>process:kill()</code> to forcefully terminate it.<div class=highlight><pre><span></span><code><a id=__codelineno-7-1 href=#__codelineno-7-1></a><span class=kr>function</span> <span class=nc>process</span><span class=p>:</span><span class=nf>terminate</span><span class=p>():</span> <span class=n>boolean</span><span class=p>,</span> <span class=n>string</span><span class=p>,</span> <span class=n>number</span> <span class=kr>end</span>
<a id=__codelineno-7-2 href=#__codelineno-7-2></a><span class=kr>function</span> <span class=nc>process</span><span class=p>:</span><span class=nf>kill</span><span class=p>():</span> <span class=n>boolean</span><span class=p>,</span> <span class=n>string</span><span class=p>,</span> <span class=n>number</span> <span class=kr>end</span>
</code></pre></div><p>On POSIX platforms, <code>process:terminate()</code> sends <code>SIGTERM</code> to the child process
while <code>process:kill()</code> sends <code>SIGKILL</code> to the child process.<p>On Windows, <code>process:terminate()</code> uses <code>GenerateConsoleCtrlEvent(CTRL_BREAK_EVENT)</code> to simulate <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-break>Break</kbd></span>.
<code>process:kill()</code> uses <code>TerminateProcess()</code> to terminate the process immediately.<div class="admonition note"><p class=admonition-title>Note<p><code>process:kill()</code> can only <strong>request</strong> a process to be killed.
On POSIX, signals are delivered asynchronously; a child process can be too busy to process them
(e.g. stuck at a blocking <code>read()</code> or <code>write()</code> call).
This is the same on Windows except <code>TerminateProcess()</code> will request cancellation of all pending
IO operations.
This is impossible on POSIX platforms.</div><p><strong>Examples:</strong><div class=highlight><pre><span></span><code><a id=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1>-- try to terminate child process</span>
<a id=__codelineno-8-2 href=#__codelineno-8-2></a><span class=n>proc</span><span class=p>:</span><span class=n>terminate</span><span class=p>()</span>
<a id=__codelineno-8-3 href=#__codelineno-8-3></a>
<a id=__codelineno-8-4 href=#__codelineno-8-4></a><span class=c1>-- wait for child process to end</span>
<a id=__codelineno-8-5 href=#__codelineno-8-5></a><span class=kr>if</span> <span class=ow>not</span> <span class=n>proc</span><span class=p>:</span><span class=n>wait</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span> <span class=kr>then</span>
<a id=__codelineno-8-6 href=#__codelineno-8-6></a>  <span class=c1>-- didn&#39;t work, have to terminate it forcefully</span>
<a id=__codelineno-8-7 href=#__codelineno-8-7></a>  <span class=n>proc</span><span class=p>:</span><span class=n>kill</span><span class=p>()</span>
<a id=__codelineno-8-8 href=#__codelineno-8-8></a><span class=kr>end</span>
</code></pre></div><h3 id=miscellaneous>Miscellaneous</h3><p><code>process:pid()</code> can be used to obtain the PID of a child process.
It will return <code>0</code> if the process is not running.<p><code>process:returncode()</code> can be used to get the exit code of the child process
without calling <code>process:wait()</code>.<p><code>process.strerror()</code> can be used to convert error codes emitted by the process API into human-readable
error messages.
If an error message is unavailable, <code>nil</code> will be returned.<p><code>process:close_stream()</code> can be used to close the child process' streams.<div class=highlight><pre><span></span><code><a id=__codelineno-9-1 href=#__codelineno-9-1></a><span class=kr>function</span> <span class=nc>process</span><span class=p>:</span><span class=nf>pid</span><span class=p>():</span> <span class=n>number</span> <span class=kr>end</span>
<a id=__codelineno-9-2 href=#__codelineno-9-2></a><span class=kr>function</span> <span class=nc>process</span><span class=p>:</span><span class=nf>returncode</span><span class=p>():</span> <span class=n>number</span> <span class=kr>end</span>
<a id=__codelineno-9-3 href=#__codelineno-9-3></a><span class=kr>function</span> <span class=nc>process</span><span class=p>.</span><span class=nf>strerror</span><span class=p>(</span><span class=n>errcode</span><span class=p>:</span> <span class=n>number</span><span class=p>):</span> <span class=n>string</span> <span class=kr>end</span>
<a id=__codelineno-9-4 href=#__codelineno-9-4></a><span class=kr>function</span> <span class=nc>process</span><span class=p>:</span><span class=nf>close_stream</span><span class=p>(</span><span class=n>stream</span><span class=p>:</span> <span class=n>number</span><span class=p>):</span> <span class=n>number</span><span class=p>,</span> <span class=n>string</span><span class=p>,</span> <span class=n>number</span> <span class=kr>end</span>
</code></pre></div><div class="admonition note"><p class=admonition-title>Note<p><code>process:pid()</code> will not return the correct process ID if
the child process ended early.</div><h3 id=error-handling>Error handling</h3><p>The Process API functions and methods will return error messages/codes or throw errors.<p><code>process.start()</code> will throw an error if the program cannot be run.
On Windows, this usually results in an error message <code>"Error creating a process: 2"</code>.<p><code>process:read()</code>, <code>process:read_stdout()</code>, <code>process:read_stderr()</code> and <code>process:write()</code> may throw errors if:<ul><li>The child process died.<li>The child process closed their side of the input/output.<li>The input/output is closed via <code>process:close_stream()</code>.</ul><p>Not all errors are documented here.
In general, it is recommended to call the functions with <code>pcall()</code> until this
inconsistency is fixed in the future.<aside class=md-source-file><span class=md-source-file__fact><span class=md-icon title="Last update"><svg viewBox="0 0 24 24"><path d="M21 13.1c-.1.0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6.0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3.0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4.0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
</span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">March 5, 2024</span></span></aside></article></div><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button type=button class="md-top md-icon" data-md-component=top hidden>
<svg viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
Back to top</button></main><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=Footer><a href=../interacting-with-the-os/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Interacting with the OS"><div class="md-footer__button md-icon"><svg viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></div><div class=md-footer__title><span class=md-footer__direction>Previous</span><div class=md-ellipsis>Interacting with the OS</div></div></a><a href=../../about/contributors/ class="md-footer__link md-footer__link--next" aria-label="Next: Contributors"><div class=md-footer__title><span class=md-footer__direction>Next</span><div class=md-ellipsis>Contributors</div></div><div class="md-footer__button md-icon"><svg viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg></div></a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright>Made with
<a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener>Material for MkDocs</a></div><div class=md-social><a href=https://github.com/lite-xl/lite-xl target=_blank rel=noopener title=github.com class=md-social__link><svg viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6.0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
</a><a href=https://discord.gg/RWzqC3nx7K target=_blank rel=noopener title=discord.gg class=md-social__link><svg viewBox="0 0 640 512"><path d="M524.531 69.836a1.5 1.5.0 00-.764-.7A485 485 0 00404.081 32.03a1.82 1.82.0 00-1.923.91 338 338 0 00-14.9 30.6 447.9 447.9.0 00-134.426.0 310 310 0 00-15.135-30.6 1.89 1.89.0 00-1.924-.91A483.7 483.7.0 00116.085 69.137a1.7 1.7.0 00-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02.0 00.765 1.375 487.7 487.7.0 00146.825 74.189 1.9 1.9.0 002.063-.676A348 348 0 00208.12 430.4a1.86 1.86.0 00-1.019-2.588 321 321 0 01-45.868-21.853 1.885 1.885.0 01-.185-3.126 251 251 0 009.109-7.137 1.82 1.82.0 011.9-.256c96.229 43.917 200.41 43.917 295.5.0a1.81 1.81.0 011.924.233 235 235 0 009.132 7.16 1.884 1.884.0 01-.162 3.126 301.4 301.4.0 01-45.89 21.83 1.875 1.875.0 00-1 2.611 391 391 0 0030.014 48.815 1.86 1.86.0 002.063.7A486 486 0 00610.7 405.729a1.88 1.88.0 00.765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972.0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665.0 53.306 26.82 52.843 59.239.0 32.654-23.41 59.241-52.843 59.241m195.38.0c-28.971.0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667.0 53.307 26.82 52.844 59.239.0 32.654-23.177 59.241-52.844 59.241"/></svg>
</a><a href=https://matrix.to/#/#lite-xl:matrix.org target=_blank rel=noopener title=matrix.to class=md-social__link><svg viewBox="0 0 24 24"><path d="M.632.55v22.9H2.28V24H0V0h2.28v.55zm7.043 7.26v1.157h.033a3.3 3.3.0 011.117-1.024c.433-.245.936-.365 1.5-.365q.81.002 1.481.314c.448.208.785.582 1.02 1.108q.382-.562 1.034-.992.651-.43 1.546-.43.679.0 1.26.167c.388.11.716.286.993.53.276.245.489.559.646.951q.229.587.23 1.417v5.728h-2.349V11.52q0-.43-.032-.812a1.8 1.8.0 00-.18-.66 1.1 1.1.0 00-.438-.448q-.292-.165-.785-.166-.498.0-.803.189a1.4 1.4.0 00-.48.499 2 2 0 00-.231.696 5.6 5.6.0 00-.06.785v4.768h-2.35v-4.8q.002-.38-.018-.752a2.1 2.1.0 00-.143-.688 1.05 1.05.0 00-.415-.503c-.194-.125-.476-.19-.854-.19q-.168.0-.439.074c-.18.051-.36.143-.53.282a1.64 1.64.0 00-.439.595q-.18.39-.18 1.02v4.966H5.46V7.81zm15.693 15.64V.55H21.72V0H24v24h-2.28v-.55z"/></svg></a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><script id=__config type=application/json>{"base":"../..","features":["navigation.footer","navigation.instant","navigation.tracking","navigation.top","navigation.tabs","content.code.copy","content.action.view","content.action.edit","header.autohide"],"search":"../../assets/javascripts/workers/search.6ce7567c.min.js","translations":{"clipboard.copied":"Copied to clipboard","clipboard.copy":"Copy to clipboard","search.result.more.one":"1 more on this page","search.result.more.other":"# more on this page","search.result.none":"No matching documents","search.result.one":"1 matching document","search.result.other":"# matching documents","search.result.placeholder":"Type to start searching","search.result.term.missing":"Missing","select.version":"Select version"},"version":{"provider":"mike"}}</script><script src=../../assets/javascripts/bundle.83f73b43.min.js></script><script src=../../javascripts/wade.min.938547.min.js></script><script src=../../javascripts/search.d34b6a.min.js></script><script>document$.subscribe(()=>{const e=GLightbox({touchNavigation:!0,loop:!1,zoomable:!0,draggable:!0,openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide"})})</script>